<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
    <link rel="stylesheet" href="http://localhost/arcgis_js_api/library/3.14/3.14/esri/css/esri.css">
    <link rel="stylesheet"  href="http://localhost/arcgis_js_api/library/3.14/3.14/dijit/themes/claro/claro.css">
</head>
<body class="claro">

<div id="colorpicker"></div>
<script src="http://localhost/arcgis_js_api/library/3.14/3.14/init.js" data-dojo-config="isDebug: 1, async: 1, parseOnLoad: 1" charset="utf-8"></script>
<div id="main"  >

    Click the button for color palette

    <div id="colorButton" style="background-color: FFFFFF; border-color: black; border-width: 1px;" dojoType="dijit.form.DropDownButton">
        <span id="colorText"><span id="colorSwatch" style="height: 10px; width: 18px; border: 1px solid black; background-color: black;">&nbsp;&nbsp;</span></span>
        <div dojoType="dijit/TooltipDialog" id="colorPaletteDialog" title="Color Palette">
            <div dojoType="dijit/ColorPalette" id="colorPaletteWidget"></div>
        </div>
    </div>

</div>
<script>
    require([ "dojo/parser",
                "dojo/aspect",
                "dojo/dom-style",
                    "dojo/dom",
                "dijit/ColorPalette",
                "dijit/form/DropDownButton",
                 "dijit/registry",
                "dojo/on",
                "dijit/TooltipDialog", "dojo/domReady!"],
            function(parser,aspect,style,dom,ColorPalette,DropDownButton,registry,on,TooltipDialog ){
                parser.parse();
                var cp = registry.byId('colorPaletteWidget');

            aspect.after(cp,"onChange",function(value ){
                    console.log(this.value);

                 //   dojo.style(registry.byId('colorSwatch'),{backgroundColor: cp.value});
                   // registry.popup.close(registry.byId("colorPaletteDialog"));
                style.set(dom.byId('colorSwatch'),{backgroundColor: cp.value});
                });


                //show main form now that parsing and event hanlding is setup
             //  var dispalyAttr=style.get(registry.byId("main"),"display");
          //  style.set( dom.byId('main'),"display","");

            }



    );
    /*
    dojo.require("dijit/ColorPalette");
    dojo.require("dijit.form.DropDownButton");
    dojo.require("dijit.TooltipDialog");


    dojo.addOnLoad(function(){

        var cp = dijit.byId('colorPaletteWidget');
        dojo.connect(cp,'onChange',function(){
            console.log("selected color",cp.value);
            dojo.style(dojo.byId('colorSwatch'),{backgroundColor: cp.value});
            dijit.popup.close(dijit.byId("colorPaletteDialog"));
        });


        //show main form now that parsing and event hanlding is setup
        dojo.byId('main').style.display = '';

    });
    */
</script>
</body>
</html>